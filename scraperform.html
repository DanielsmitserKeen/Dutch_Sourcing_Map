<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScrapeMaster Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.globe.min.js"></script>
    <style>
        .vanta-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        .glass-card {
            backdrop-filter: blur(16px) saturate(180%);
            -webkit-backdrop-filter: blur(16px) saturate(180%);
            background-color: rgba(255, 255, 255, 0.75);
            border-radius: 12px;
            border: 1px solid rgba(209, 213, 219, 0.3);
        }
        .chip {
            transition: all 0.3s ease;
        }
        .chip:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .link-item {
            transition: all 0.2s ease;
        }
        .link-item:hover {
            background-color: rgba(59, 130, 246, 0.1);
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100">
    <div class="vanta-container" id="vanta-bg"></div>
    
    <div class="container mx-auto px-4 py-12">
        <div class="text-center mb-12">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">ScrapeMaster Pro</h1>
            <p class="text-xl text-gray-600">Your ultimate data extraction ninja tool</p>
            <div class="flex justify-center mt-4">
                <div class="w-16 h-1 bg-blue-500 rounded-full"></div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-6xl mx-auto">
            <!-- LinkedIn Scraper Card -->
            <div class="glass-card p-6 shadow-xl">
                <div class="flex items-center mb-4">
                    <i data-feather="linkedin" class="text-blue-600 mr-3"></i>
                    <h2 class="text-2xl font-semibold text-gray-800">LinkedIn Scraper</h2>
                </div>
                
                <form action="https://danielsmitserkeen.app.n8n.cloud/webhook/f1080734-282b-4d73-a7c1-874fab8948bf" method="POST" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Country</label>
                        <select name="country" required class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="">Select a country...</option>
                            <option value="Netherlands">Netherlands</option>
                            <option value="Germany">Germany</option>
                            <option value="France">France</option>
                            <option value="UK">United Kingdom</option>
                            <option value="USA">USA</option>
                        </select>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Pages to Scrape</label>
                            <input type="number" name="linkedin_pages_limit" min="1" max="100" value="20" required 
                                   class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Posts per Page</label>
                            <input type="number" name="posts_per_page" min="1" max="50" value="10" required 
                                   class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Industries</label>
                        <input type="hidden" id="industriesInput" name="industries">
                        <div class="flex flex-wrap gap-2" id="industryChips"></div>
                        <div class="mt-2 grid grid-cols-2 md:grid-cols-4 gap-2">
<button type="button" onclick="toggleIndustry('SaaS')" class="chip px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200">
                                SaaS
                            </button>
                            <button type="button" onclick="toggleIndustry('Enterprise Software')" class="chip px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200">
                                Enterprise Software
                            </button>
                            <button type="button" onclick="toggleIndustry('AI & Machine Learning')" class="chip px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200">
                                AI & ML
                            </button>
                            <button type="button" onclick="toggleIndustry('Cybersecurity')" class="chip px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200">
                                Cybersecurity
                            </button>
                            <button type="button" onclick="toggleIndustry('Data Analytics')" class="chip px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200">
                                Data Analytics
                            </button>
                            <button type="button" onclick="toggleIndustry('Cloud Infrastructure')" class="chip px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200">
                                Cloud Infrastructure
                            </button>
                            <button type="button" onclick="toggleIndustry('FinTech')" class="chip px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200">
                                FinTech
                            </button>
                            <button type="button" onclick="toggleIndustry('HealthTech')" class="chip px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200">
                                HealthTech
                            </button>
                            <button type="button" onclick="toggleIndustry('EdTech')" class="chip px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200">
                                EdTech
                            </button>
                            <button type="button" onclick="toggleIndustry('HRTech')" class="chip px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200">
                                HRTech
                            </button>
                            <button type="button" onclick="toggleIndustry('MarTech')" class="chip px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200">
                                MarTech
                            </button>
                            <button type="button" onclick="toggleIndustry('Supply Chain Tech')" class="chip px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200">
                                Supply Chain Tech
                            </button>
                            <button type="button" onclick="toggleIndustry('E-commerce Tech')" class="chip px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200">
                                E-commerce Tech
                            </button>
                            <button type="button" onclick="toggleIndustry('LegalTech')" class="chip px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200">
                                LegalTech
                            </button>
                            <button type="button" onclick="toggleIndustry('PropTech')" class="chip px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200">
                                PropTech
                            </button>
                            <button type="button" onclick="toggleIndustry('AgriTech')" class="chip px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200">
                                AgriTech
                            </button>
                            <button type="button" onclick="toggleIndustry('ClimateTech')" class="chip px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200">
                                ClimateTech
                            </button>
                            <button type="button" onclick="toggleIndustry('IndustrialTech')" class="chip px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200">
                                IndustrialTech
                            </button>
                            <button type="button" onclick="toggleIndustry('IoT')" class="chip px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200">
                                IoT
                            </button>
                            <button type="button" onclick="toggleIndustry('Productivity Tools')" class="chip px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200">
                                Productivity Tools
                            </button>
</div>
                    </div>

                    <button type="submit" class="w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition duration-300 flex items-center justify-center">
                        <i data-feather="download" class="mr-2"></i>
                        Extract Data
                    </button>
                </form>
            </div>

            <!-- Substack Manager Card -->
            <div class="glass-card p-6 shadow-xl">
                <div class="flex items-center mb-4">
                    <i data-feather="book" class="text-purple-600 mr-3"></i>
                    <h2 class="text-2xl font-semibold text-gray-800">Substack Manager</h2>
                </div>

                <div class="mb-6">
                    <div class="flex space-x-2">
                        <input type="text" id="newLink" placeholder="https://example.substack.com/p/post" 
                               class="flex-1 px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-purple-500 focus:border-purple-500">
                        <button onclick="addLink()" class="px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition duration-300 flex items-center">
                            <i data-feather="plus" class="mr-1"></i>
                            Add
                        </button>
                    </div>
                </div>

                <div class="space-y-2" id="linksList">
                    <div class="text-center py-4 text-gray-500">
                        <i data-feather="loader" class="animate-spin mx-auto"></i>
                        Loading links...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Vanta.js background
        VANTA.GLOBE({
            el: "#vanta-bg",
            mouseControls: true,
            touchControls: true,
            gyroControls: false,
            minHeight: 200.00,
            minWidth: 200.00,
            scale: 1.00,
            scaleMobile: 1.00,
            color: 0x3b82f6,
            backgroundColor: 0xf8fafc,
            size: 0.8
        });

        // Initialize feather icons
        feather.replace();

        // LinkedIn Industry Selection
        const selectedIndustries = [];
        const industriesInput = document.getElementById('industriesInput');
        const industryChips = document.getElementById('industryChips');

        function toggleIndustry(industry) {
            const index = selectedIndustries.indexOf(industry);
            if (index === -1) {
                selectedIndustries.push(industry);
            } else {
                selectedIndustries.splice(index, 1);
            }
            updateIndustryChips();
            industriesInput.value = selectedIndustries.join(',');
        }

        function updateIndustryChips() {
            industryChips.innerHTML = '';
            selectedIndustries.forEach(industry => {
                const chip = document.createElement('div');
                chip.className = 'inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-800 text-sm';
                chip.innerHTML = `${industry} <button onclick="removeIndustry('${industry}')" class="ml-1 text-blue-600 hover:text-blue-800">&times;</button>`;
                industryChips.appendChild(chip);
            });

            if (selectedIndustries.length === 0) {
                const placeholder = document.createElement('div');
                placeholder.className = 'text-gray-500 text-sm';
                placeholder.textContent = 'No industries selected';
                industryChips.appendChild(placeholder);
            }
        }

        function removeIndustry(industry) {
            const index = selectedIndustries.indexOf(industry);
            if (index !== -1) {
                selectedIndustries.splice(index, 1);
                updateIndustryChips();
                industriesInput.value = selectedIndustries.join(',');
            }
        }

        // Substack Manager
        const apiUrl = "https://script.google.com/macros/s/AKfycbzgZHP5maZpIi-jljLrAyVC2AAmyNqTSX6FU8hkJHtT2KYIkzo8PftSQPyLHrMWq8o/exec";

        async function fetchLinks() {
            try {
                const res = await fetch(apiUrl);
                const data = await res.json();
                renderLinks(data);
            } catch (err) {
                console.error("Error fetching links:", err);
                document.getElementById('linksList').innerHTML = `
                    <div class="text-center py-4 text-red-500">
                        <i data-feather="alert-circle" class="mx-auto"></i>
                        Failed to load links
                    </div>
                `;
                feather.replace();
            }
        }

        function renderLinks(links) {
            const list = document.getElementById("linksList");
            
            if (!links || links.length === 0) {
                list.innerHTML = `
                    <div class="text-center py-4 text-gray-500">
                        <i data-feather="inbox" class="mx-auto"></i>
                        No links added yet
                    </div>
                `;
                feather.replace();
                return;
            }
            
            list.innerHTML = '';
            links.forEach(link => {
                const item = document.createElement('div');
                item.className = 'link-item p-3 rounded-lg flex justify-between items-center';
                item.innerHTML = `
                    <a href="${link}" target="_blank" class="text-blue-600 hover:text-blue-800 hover:underline truncate max-w-xs">${link}</a>
                    <button onclick="removeLink('${link}')" class="p-1 text-red-500 hover:text-red-700 rounded-full hover:bg-red-50">
                        <i data-feather="trash-2" class="w-4 h-4"></i>
                    </button>
                `;
                list.appendChild(item);
            });
            feather.replace();
        }

        async function addLink() {
            const linkInput = document.getElementById('newLink');
            const link = linkInput.value.trim();
            
            if (!link) {
                return;
            }

            try {
                await fetch(apiUrl, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ action: "add", link })
                });
                
                linkInput.value = "";
                fetchLinks();
                
                // Show success notification
                const notification = document.createElement('div');
                notification.className = 'fixed bottom-4 right-4 px-4 py-2 bg-green-500 text-white rounded-lg shadow-lg flex items-center';
                notification.innerHTML = `
                    <i data-feather="check-circle" class="mr-2"></i>
                    Link added successfully
                `;
                document.body.appendChild(notification);
                feather.replace();
                
                setTimeout(() => {
                    notification.remove();
                }, 3000);
                
            } catch (err) {
                console.error("Error adding link:", err);
            }
        }

        async function removeLink(link) {
            try {
                await fetch(apiUrl, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ action: "remove", link })
                });
                fetchLinks();
                
                // Show success notification
                const notification = document.createElement('div');
                notification.className = 'fixed bottom-4 right-4 px-4 py-2 bg-green-500 text-white rounded-lg shadow-lg flex items-center';
                notification.innerHTML = `
                    <i data-feather="check-circle" class="mr-2"></i>
                    Link removed successfully
                `;
                document.body.appendChild(notification);
                feather.replace();
                
                setTimeout(() => {
                    notification.remove();
                }, 3000);
                
            } catch (err) {
                console.error("Error removing link:", err);
            }
        }

        // Load links on page load
        fetchLinks();
    </script>
</body>
</html>
